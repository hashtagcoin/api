{
   "swagger": "2.0",
   "info": {
      "version": 1,
      "title": "WebWallet API"
   },
   "host": "localhost:3000",
   "basePath": "/",
   "schemes": [
      "https"
   ],
   "consumes": "application/json",
   "produces": "application/json",
   "paths": {
      "/address/{address}/balance": {
         "get": {
            "description": "",
            "parameters": [
               {
                  "name": "address",
                  "in": "path",
                  "required": true,
                  "schema": {
                     "$ref": "#/definitions/webwallet-address"
                  }
               },
               {
                  "name": "currency",
                  "in": "query",
                  "schema": {
                     "$ref": "#/definitions/currency-unit"
                  }
               }
            ],
            "responses": {
               "default": {
                  "description": "",
                  "schema": {
                     "type": "object",
                     "properties": {}
                  },
                  "examples": {}
               }
            }
         }
      },
      "/currency/{currency}/supply": {
         "get": {
            "description": "",
            "parameters": [
               {
                  "name": "currency",
                  "in": "path",
                  "required": true,
                  "schema": {
                     "$ref": "#/definitions/currency-unit"
                  }
               }
            ],
            "responses": {
               "default": {
                  "description": "",
                  "schema": {
                     "type": "object",
                     "properties": {}
                  },
                  "examples": {}
               }
            }
         }
      },
      "/transaction": {
         "post": {
            "description": "",
            "parameters": [
               {
                  "name": "hash",
                  "in": "body",
                  "required": true,
                  "schema": {
                     "$ref": "#/definitions/crypto-hash-object"
                  }
               },
               {
                  "name": "data",
                  "in": "body",
                  "required": true,
                  "schema": {
                     "$ref": "#/definitions/transaction-request-data"
                  }
               },
               {
                  "name": "sigs",
                  "in": "body",
                  "schema": {
                     "$ref": "#/definitions/crypto-signatures"
                  }
               }
            ],
            "responses": {
               "default": {
                  "description": "",
                  "schema": {
                     "type": "object",
                     "properties": {}
                  },
                  "examples": {}
               }
            }
         }
      }
   },
   "definitions": {
      "big-number-positive": {
         "type": "string",
         "pattern": "/^[+]?[0-9]+(.[0-9]+)?$/",
         "maxLength": 101,
         "description": "big-number string for arbitrary-precision arithmetic"
      },
      "crypto-hash-object": {
         "type": "object",
         "required": [
            "alg",
            "val"
         ],
         "properties": {
            "alg": {
               "type": "string",
               "enum": [
                  "sha256"
               ],
               "description": "cryptographic hash algorithm",
               "default": "sha256"
            },
            "typ": {
               "type": "string",
               "enum": [
                  "stringify:data",
                  "merkle:data.inputs.hash.val"
               ],
               "description": "instructions for hash generation",
               "default": "stringify:data"
            },
            "val": {
               "type": "string",
               "minLength": 64,
               "maxLength": 64,
               "description": "cryptographic hash value"
            }
         }
      },
      "crypto-public-key": {
         "type": "string",
         "minLength": 66,
         "maxLength": 130,
         "description": "cryptographic public key in hex format"
      },
      "crypto-signature-object": {
         "type": "object",
         "required": [
            "alg",
            "wid",
            "sig"
         ],
         "properties": {
            "alg": {
               "type": "string",
               "enum": [
                  "ed25519"
               ],
               "description": "digital signature algorithm"
            },
            "wid": {
               "$ref": "#/definitions/webwallet-address"
            },
            "key": {
               "$ref": "#/definitions/crypto-public-key"
            },
            "kid": {
               "type": "integer",
               "minimum": 0,
               "maximum": 0,
               "description": "index of an array of public keys"
            },
            "sig": {
               "type": "string",
               "minLength": 140,
               "maxLength": 140,
               "description": "digital signature"
            }
         }
      },
      "crypto-signatures": {
         "type": "array",
         "minItems": 1,
         "maxItems": 1,
         "items": {
            "type": "object",
            "required": [
               "alg",
               "wid",
               "sig"
            ],
            "properties": {
               "alg": {
                  "type": "string",
                  "enum": [
                     "ed25519"
                  ],
                  "description": "digital signature algorithm"
               },
               "wid": {
                  "$ref": "#/definitions/webwallet-address"
               },
               "key": {
                  "$ref": "#/definitions/crypto-public-key"
               },
               "kid": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 0,
                  "description": "index of an array of public keys"
               },
               "sig": {
                  "type": "string",
                  "minLength": 140,
                  "maxLength": 140,
                  "description": "DER encoded digital signature"
               }
            }
         },
         "description": "an array of digital signature objects"
      },
      "currency-unit": {
         "type": "string",
         "pattern": "/^[1-9A-HJ-NP-Za-km-z]+$/",
         "minLength": 26,
         "maxLength": 35,
         "description": "alphanumeric identifier for a currency unit"
      },
      "transaction-inputs": {
         "type": "array",
         "minItems": 1,
         "maxItems": 1,
         "items": {
            "type": "object",
            "required": [
               "hash",
               "data",
               "sigs"
            ],
            "properties": {
               "hash": {
                  "$ref": "#/definitions/crypto-hash-object"
               },
               "data": {
                  "$ref": "#/definitions/transaction-iou-data"
               },
               "sigs": {
                  "$ref": "#/definitions/crypto-signature-object"
               }
            }
         },
         "description": "transaction inputs (IOUs)"
      },
      "transaction-iou-data": {
         "type": "object",
         "required": [
            "iss",
            "sub",
            "aud",
            "amt",
            "cur",
            "nce",
            "exp"
         ],
         "properties": {
            "iss": {
               "type": "string",
               "maxLength": 100,
               "description": "(issuer) webwallet domain"
            },
            "sub": {
               "$ref": "#/definitions/webwallet-address"
            },
            "aud": {
               "$ref": "#/definitions/webwallet-address"
            },
            "amt": {
               "$ref": "#/definitions/big-number-positive"
            },
            "cur": {
               "$ref": "#/definitions/currency-unit"
            },
            "nce": {
               "type": "string",
               "maxLength": 100,
               "description": "(nonce) random value to prevent replay attacks"
            },
            "iat": {
               "type": "string",
               "format": "date-time",
               "description": "(issued at) for reference purpose only"
            },
            "nbf": {
               "type": "string",
               "format": "date-time",
               "description": "(not before) earliest valid date for clearing"
            },
            "exp": {
               "type": "string",
               "format": "date-time",
               "description": "(expires) latest valid date for clearing"
            }
         }
      },
      "transaction-record-data": {
         "type": "object",
         "properties": {}
      },
      "transaction-request-data": {
         "type": "object",
         "required": [
            "inputs"
         ],
         "properties": {
            "inputs": {
               "$ref": "#/definitions/transaction-inputs"
            }
         }
      },
      "webwallet-address": {
         "type": "string",
         "pattern": "/^[1-9A-HJ-NP-Za-km-z]+$/",
         "minLength": 26,
         "maxLength": 35,
         "description": "alphanumeric identifier for a wallet address"
      }
   }
}